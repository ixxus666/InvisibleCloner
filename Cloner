--=====================================
-- SERVICES / PLAYER
--=====================================
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

--=====================================
-- SKELETON ESP
--=====================================
local tracked = {}

local function createBone(p0, p1, parent)
	if not p0 or not p1 then return end

	local a0 = Instance.new("Attachment", p0)
	local a1 = Instance.new("Attachment", p1)

	local beam = Instance.new("Beam")
	beam.Attachment0 = a0
	beam.Attachment1 = a1
	beam.Color = ColorSequence.new(Color3.fromRGB(255,255,0))
	beam.Width0 = 0.15
	beam.Width1 = 0.15
	beam.FaceCamera = true
	beam.LightEmission = 1
	beam.LightInfluence = 0
	beam.Parent = parent
end

local function createESP(character)
	if tracked[character] then return end
	tracked[character] = true

	local humanoid = character:FindFirstChildOfClass("Humanoid")
	if not humanoid then return end

	local folder = Instance.new("Folder")
	folder.Name = "SkeletonESP"
	folder.Parent = character

	-- R6 + R15 parts
	local head = character:FindFirstChild("Head")
	local upper = character:FindFirstChild("UpperTorso") or character:FindFirstChild("Torso")
	local lower = character:FindFirstChild("LowerTorso")

	local lArm = character:FindFirstChild("LeftUpperArm") or character:FindFirstChild("Left Arm")
	local rArm = character:FindFirstChild("RightUpperArm") or character:FindFirstChild("Right Arm")
	local lLeg = character:FindFirstChild("LeftUpperLeg") or character:FindFirstChild("Left Leg")
	local rLeg = character:FindFirstChild("RightUpperLeg") or character:FindFirstChild("Right Leg")

	local lFore = character:FindFirstChild("LeftLowerArm")
	local rFore = character:FindFirstChild("RightLowerArm")
	local lHand = character:FindFirstChild("LeftHand")
	local rHand = character:FindFirstChild("RightHand")

	local lShin = character:FindFirstChild("LeftLowerLeg")
	local rShin = character:FindFirstChild("RightLowerLeg")
	local lFoot = character:FindFirstChild("LeftFoot")
	local rFoot = character:FindFirstChild("RightFoot")

	-- Core
	createBone(head, upper, folder)
	createBone(upper, lower, folder)

	-- Arms
	createBone(upper, lArm, folder)
	createBone(upper, rArm, folder)
	createBone(lArm, lFore, folder)
	createBone(lFore, lHand, folder)
	createBone(rArm, rFore, folder)
	createBone(rFore, rHand, folder)

	-- Legs
	createBone(upper, lLeg, folder)
	createBone(upper, rLeg, folder)
	createBone(lLeg, lShin, folder)
	createBone(lShin, lFoot, folder)
	createBone(rLeg, rShin, folder)
	createBone(rShin, rFoot, folder)

	-- Billboard
	local bb = Instance.new("BillboardGui")
	bb.Size = UDim2.new(0,120,0,40)
	bb.StudsOffset = Vector3.new(0,3,0)
	bb.AlwaysOnTop = true
	bb.Parent = head or upper

	local label = Instance.new("TextLabel")
	label.Size = UDim2.fromScale(1,1)
	label.BackgroundTransparency = 1
	label.Text = "ðŸŸ¡ Clone"
	label.TextColor3 = Color3.fromRGB(255,255,0)
	label.TextStrokeTransparency = 0.3
	label.Font = Enum.Font.FredokaOne
	label.TextSize = 14
	label.Parent = bb
end

-- Monitor workspace
workspace.ChildAdded:Connect(function(child)
	task.wait(0.2)
	if child:IsA("Model")
		and child ~= player.Character
		and child:FindFirstChildOfClass("Humanoid") then
		createESP(child)
	end
end)

--=====================================
-- GUI
--=====================================
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0,220,0,90)
frame.Position = UDim2.new(0.5,-110,0.5,-45)
frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
frame.BorderSizePixel = 0
frame.Active = true
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,26)
title.BackgroundColor3 = Color3.fromRGB(60,60,60)
title.Text = "ðŸ”® Invisibility Combo + ESP"
title.TextColor3 = Color3.fromRGB(220,220,220)
title.Font = Enum.Font.FredokaOne
title.TextSize = 12
title.BorderSizePixel = 0
title.Parent = frame

-- Discord label (visible under button)
local discordLabel = Instance.new("TextLabel")
discordLabel.Size = UDim2.new(1, -20, 0, 18)
discordLabel.Position = UDim2.new(0, 10, 0, 85)
discordLabel.BackgroundTransparency = 1
discordLabel.Text = "discord.gg/A5BjXj6Kkf"
discordLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
discordLabel.TextStrokeTransparency = 0.5
discordLabel.Font = Enum.Font.FredokaOne
discordLabel.TextSize = 11
discordLabel.TextWrapped = true
discordLabel.Parent = frame

local button = Instance.new("TextButton")
button.Size = UDim2.new(1,-20,0,45)
button.Position = UDim2.new(0,10,0,35)
button.BackgroundColor3 = Color3.fromRGB(120,60,220)
button.Text = "Activate Combo"
button.TextColor3 = Color3.new(1,1,1)
button.Font = Enum.Font.FredokaOne
button.TextSize = 16
button.BorderSizePixel = 0
button.Parent = frame
Instance.new("UICorner", button).CornerRadius = UDim.new(0,8)

--=====================================
-- MOBILE DRAG
--=====================================
local dragging, dragStart, startPos

title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch
	or input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.Touch
	or input.UserInputType == Enum.UserInputType.MouseMovement) then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end
end)

UserInputService.InputEnded:Connect(function()
	dragging = false
end)

--=====================================
-- COMBO LOGIC
--=====================================
local busy = false

button.Activated:Connect(function()
	if busy then return end
	busy = true

	local char = player.Character
	local hum = char and char:FindFirstChildOfClass("Humanoid")
	local backpack = player:FindFirstChild("Backpack")

	if not hum or not backpack then
		busy = false
		return
	end

	local cloak, cloner
	for _,tool in ipairs(backpack:GetChildren()) do
		if tool:IsA("Tool") then
			local n = tool.Name:lower()
			if n:find("invisibility") then
				cloak = tool
			elseif n:find("quantum") and n:find("cloner") then
				cloner = tool
			end
		end
	end

	if cloak then
		hum:UnequipTools()
		task.wait(0.05)
		hum:EquipTool(cloak)
		task.wait(0.05)
		cloak:Activate()

		button.Text = "Cloak Activated"
		button.BackgroundColor3 = Color3.fromRGB(0,200,0)

		task.wait(1)

		if cloner then
			hum:EquipTool(cloner)
			task.wait(0.05)
			cloner:Activate()
			button.Text = "Cloner Activated"
			task.wait(0.4)
		end

		button.Text = "Activate Combo"
		button.BackgroundColor3 = Color3.fromRGB(120,60,220)
	else
		button.Text = "Cloak Not Found"
		button.BackgroundColor3 = Color3.fromRGB(200,0,0)
		task.wait(1)
		button.Text = "Activate Combo"
		button.BackgroundColor3 = Color3.fromRGB(120,60,220)
	end

	busy = false
end)

print("ðŸ“± Mobile Combo + Skeleton ESP Loaded")
